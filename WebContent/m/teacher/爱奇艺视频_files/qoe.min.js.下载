/*! usertiming v0.1.8 */
!function(a){"use strict";"undefined"==typeof a&&(a={}),"undefined"==typeof a.performance&&(a.performance={}),a._perfRefForUserTimingPolyfill=a.performance,a.performance.userTimingJsNow=!1,a.performance.userTimingJsNowPrefixed=!1,a.performance.userTimingJsUserTiming=!1,a.performance.userTimingJsUserTimingPrefixed=!1,a.performance.userTimingJsPerformanceTimeline=!1,a.performance.userTimingJsPerformanceTimelinePrefixed=!1;var b,c,d=[],e=[],f=null;if("function"!=typeof a.performance.now){for(a.performance.userTimingJsNow=!0,e=["webkitNow","msNow","mozNow"],b=0;b<e.length;b++)if("function"==typeof a.performance[e[b]]){a.performance.now=a.performance[e[b]],a.performance.userTimingJsNowPrefixed=!0;break}var g=+new Date;a.performance.timing&&a.performance.timing.navigationStart?g=a.performance.timing.navigationStart:"undefined"!=typeof process&&"function"==typeof process.hrtime&&(g=process.hrtime(),a.performance.now=function(){var a=process.hrtime(g);return 1e3*a[0]+1e-6*a[1]}),"function"!=typeof a.performance.now&&(Date.now?a.performance.now=function(){return Date.now()-g}:a.performance.now=function(){return+new Date-g})}var h=function(){},i=function(){},j=[],k=!1,l=!1;if("function"!=typeof a.performance.getEntries||"function"!=typeof a.performance.mark){for("function"==typeof a.performance.getEntries&&"function"!=typeof a.performance.mark&&(l=!0),a.performance.userTimingJsPerformanceTimeline=!0,d=["webkit","moz"],e=["getEntries","getEntriesByName","getEntriesByType"],b=0;b<e.length;b++)for(c=0;c<d.length;c++)f=d[c]+e[b].substr(0,1).toUpperCase()+e[b].substr(1),"function"==typeof a.performance[f]&&(a.performance[e[b]]=a.performance[f],a.performance.userTimingJsPerformanceTimelinePrefixed=!0);h=function(a){j.push(a),"measure"===a.entryType&&(k=!0)};var m=function(){k&&(j.sort(function(a,b){return a.startTime-b.startTime}),k=!1)};if(i=function(a,c){for(b=0;b<j.length;)j[b].entryType===a&&("undefined"==typeof c||j[b].name===c)?j.splice(b,1):b++},"function"!=typeof a.performance.getEntries||l){var n=a.performance.getEntries;a.performance.getEntries=function(){m();var b=j.slice(0);return l&&n&&(Array.prototype.push.apply(b,n.call(a.performance)),b.sort(function(a,b){return a.startTime-b.startTime})),b}}if("function"!=typeof a.performance.getEntriesByType||l){var o=a.performance.getEntriesByType;a.performance.getEntriesByType=function(c){if("undefined"==typeof c||"mark"!==c&&"measure"!==c)return l&&o?o.call(a.performance,c):[];"measure"===c&&m();var d=[];for(b=0;b<j.length;b++)j[b].entryType===c&&d.push(j[b]);return d}}if("function"!=typeof a.performance.getEntriesByName||l){var p=a.performance.getEntriesByName;a.performance.getEntriesByName=function(c,d){if(d&&"mark"!==d&&"measure"!==d)return l&&p?p.call(a.performance,c,d):[];"undefined"!=typeof d&&"measure"===d&&m();var e=[];for(b=0;b<j.length;b++)("undefined"==typeof d||j[b].entryType===d)&&j[b].name===c&&e.push(j[b]);return l&&p&&(Array.prototype.push.apply(e,p.call(a.performance,c,d)),e.sort(function(a,b){return a.startTime-b.startTime})),e}}}if("function"!=typeof a.performance.mark){for(a.performance.userTimingJsUserTiming=!0,d=["webkit","moz","ms"],e=["mark","measure","clearMarks","clearMeasures"],b=0;b<e.length;b++)for(c=0;c<d.length;c++)f=d[c]+e[b].substr(0,1).toUpperCase()+e[b].substr(1),"function"==typeof a.performance[f]&&(a.performance[e[b]]=a.performance[f],a.performance.userTimingJsUserTimingPrefixed=!0);var q={};"function"!=typeof a.performance.mark&&(a.performance.mark=function(b){var c=a.performance.now();if("undefined"==typeof b)throw new SyntaxError("Mark name must be specified");if(a.performance.timing&&b in a.performance.timing)throw new SyntaxError("Mark name is not allowed");q[b]||(q[b]=[]),q[b].push(c),h({entryType:"mark",name:b,startTime:c,duration:0})}),"function"!=typeof a.performance.clearMarks&&(a.performance.clearMarks=function(a){a?q[a]=[]:q={},i("mark",a)}),"function"!=typeof a.performance.measure&&(a.performance.measure=function(b,c,d){var e=a.performance.now();if("undefined"==typeof b)throw new SyntaxError("Measure must be specified");if(!c)return void h({entryType:"measure",name:b,startTime:0,duration:e});var f=0;if(a.performance.timing&&c in a.performance.timing){if("navigationStart"!==c&&0===a.performance.timing[c])throw new Error(c+" has a timing of 0");f=a.performance.timing[c]-a.performance.timing.navigationStart}else{if(!(c in q))throw new Error(c+" mark not found");f=q[c][q[c].length-1]}var g=e;if(d)if(g=0,a.performance.timing&&d in a.performance.timing){if("navigationStart"!==d&&0===a.performance.timing[d])throw new Error(d+" has a timing of 0");g=a.performance.timing[d]-a.performance.timing.navigationStart}else{if(!(d in q))throw new Error(d+" mark not found");g=q[d][q[d].length-1]}var i=g-f;h({entryType:"measure",name:b,startTime:f,duration:i})}),"function"!=typeof a.performance.clearMeasures&&(a.performance.clearMeasures=function(a){i("measure",a)})}"function"==typeof define&&define.amd?define([],function(){return a.performance}):"undefined"!=typeof module&&"undefined"!=typeof module.exports&&(module.exports=a.performance)}("undefined"!=typeof window?window:void 0);
/**
 * QOE
*/
!function(a,b){var u,c="firstPage",d="_Q_test_",e="_QOE_HIT_",f="https://activity.m.iqiyi.com/qoe.gif",g="https://activity.m.iqiyi.com/qoe.gif",h=/\/\/static\.qiyi\.com\/js\/html5\/js\/lib\/lib\.(.*)+js\?sea1\.2\.min\.js/,i=/\/\/static\.qiyi\.com\/js\/html5\/js\/page\/\w+\/\w{8}!app(\w*)+\.js/,j=/\/\/s?b\.scorecardresearch\.com\/beacon\.js/,k=/\/\/hm\.baidu\.com\/hm\.js\?5df871ab99f94347b23ca224fc7d013f/,l=/\/\/iqiyi\.irs01\.com\/irt/,m=/\/\/static\.iqiyi\.com\/js\/common\/ares\-/,n={},o=b.timing,p={get responseStart(){return o.responseStart-o.navigationStart},get analysisStart(){return o.domLoading-o.navigationStart},get analysisEnd(){return o.domInteractive-o.navigationStart},get analysis1stPage(){var a=q.byName(c)[0];return a?a.startTime:null},get domComplete(){return o.domComplete-o.navigationStart},get docLoad(){return o.responseEnd-o.navigationStart},get prepareAnalysis(){return o.domLoading-o.responseStart}},q={byName:function(a){return b.getEntriesByName(a)},byType:function(a){return b.getEntriesByType(a||"resource")},byFilter:function(a,c){return b.getEntriesByType(c||"resource").filter(a)},byRegExp:function(a,c){var d,e;return d="[object Array]"===Object.prototype.toString.call(c)?c:b.getEntriesByType(c||"resource"),e=function(a){switch(Object.prototype.toString.call(a)){case"[object RegExp]":return function(b){return a.test(b)};case"[object String]":return function(b){return-1!==b.indexOf(a)};default:return null}}(a),e?d.filter(function(a){return e(a.name)}):[]}},r={get checkHit(){try{a.sessionStorage.removeItem(d),a.sessionStorage.setItem(d,1),a.sessionStorage.removeItem(d)}catch(b){return console.error("sessionStorage error: "+JSON.stringify(b)),!1}var c=sessionStorage.getItem(e);return c||(c=Math.round(100*Math.random()),sessionStorage.setItem(e,c)),10>c>>0},calculate:function(a){var d,b={duration:-1,LastResponse:-1},c=[];return"[object Array]"===Object.prototype.toString.call(a)&&(a.forEach(function(a){a.startTime>0&&c.push(a.startTime),a.responseEnd>0&&c.push(a.responseEnd)}),d=Math.max.apply(Math,c),b.duration=d-Math.min.apply(Math,c),b.LastResponse=d),b},extend:function(a,b){var c=Object.getOwnPropertyNames(b);c.forEach(function(c){a[c]=b[c]})},send:function(a,b){var c=a,d=Object.getOwnPropertyNames(b);c+="?"+d.map(function(a){return a+"="+b[a]}).join("&"),u?(c=c.replace(/((?:\?|\&)groupname=\w+?)(?=\&|$)/,"$1_LAN"),(new Image).src=c,console.log("[QOE] debug: "+c)):((new Image).src=c,console.log("[QOE] sent: "+c))}},s={universal:function(a){return{docLoad:p.docLoad,analysisEnd:p.analysisEnd,domComplete:p.domComplete,responseStart:p.responseStart,analysisStart:p.analysisStart,syncJsAndCssOn1stPage:r.calculate(a).duration}},js:function(){var b,a={libLoad:h,appLoad:i,comscore:j,hm:k,irt:l,ads:m};for(b in a)a[b]=r.calculate(q.byRegExp(a[b])).duration;return a},ajax:function(a){var c,b=[];return a.forEach(function(a){b=b.concat(q.byRegExp(a))}),c=r.calculate(b),{ajaxConsuming:c.duration,ajaxReady:c.LastResponse}}},t=function(a){this.activation=a||r.checkHit,this.actionIndex=0};t.prototype={constructor:t,config:function(a,b){this.activation&&(a.pageName?(this.pageName=a.pageName,this.ajax=a.ajax||[],this.consuming=a.consuming||[],this.extendParams=a.extendParams||{},b&&b.call(this)):console.warn("[QOE] error: there seems to be no pagename"))},mark:function(a,c){b.mark(a);var d=b.now();return c&&(n[a]=d),d},measure:function(a,c,d,e){b.measure(a,c,d);var f=q.byName(a)[0].duration;return e&&(n[a]=f),b.clearMeasures(a),f},syncResource:function(){this.syncJsAndCssOn1stPage=q.byFilter(function(a){return"css"!==a.initiatorType&&"img"!==a.initiatorType})},sendGroup:function(){var a,b,c;this.mark("QOEPrepare"),this.set(s.universal(this.syncJsAndCssOn1stPage)),this.set(s.js()),this.set(s.ajax(this.ajax)),a=f,b={type:"qoe",groupname:"m_page_"+this.pageName,_:+new Date},r.extend(b,this.extendParams),this.mark("QOESend"),this.measure("QOERun","QOEPrepare","QOESend",!0);for(c in n)n[c]>0?b[c]=n[c].toFixed(2):console.warn("[QOE] missing: "+c);r.send(a,b)},sendIntreface:function(a,b){var c,d,e,f;if("undefined"==typeof b){if(c=a+"Start",d=a+"End",!q.byName(c).length)return console.warn("[QOE] send interface error: startMark is missing"),void 0;if(!q.byName(d).length)return console.warn("[QOE] send interface error: endMark is missing"),void 0;b=this.measure(a,c,d)}return 0>=b>>0?(console.warn("[QOE] send interface error: value is negative"),void 0):(e=g,f={groupname:"m_if_"+a},f[a]=b.toFixed(2),r.send(e,f),void 0)},sendAction:function(){var a=this.consuming,b=this.actionIndex,c=q.byFilter(function(a,c){return c>b&&("script"===a.initiatorType||"xmlhttprequest"===a.initiatorType)});a.forEach(function(a){q.byRegExp(a.pattern,c).forEach(function(b){this.sendIntreface(a.name,b.duration)},this)},this),this.actionIndex=q.byType().length},set:function(a){r.extend(n,a)},get:function(a){return a&&n[a]?n[a]:a&&!n[a]?(console.warn("there is no property called '"+a+"'"),null):n}},u=new RegExp("debugqoe_"+(0|+new Date/1e6).toString(32)).test(location.search),a.__QOE__=new t(u)}(window,performance);